!!!
%html{ xmlns: 'http://www.w3.org/1999/xhtml', 'xml:lang' => 'en-us', lang: 'en-us' }
  %head{ prefix: 'og: http://ogp.me/ns#' }
    %meta{ 'http-equiv' => 'content-type', content: 'text/html; charset=utf-8' }
    %meta{ name: 'viewport', content: 'width=device-width, initial-scale=1.0, maximum-scale=1' }
    %title
      - if current_page.data.title
        #{current_page.data.title} | #{Movielog.site_title}
      - elsif content_for?(:title)
        #{yield_content(:title)} | #{Movielog.site_title}
      - else
        #{Movielog.site_title}
    = stylesheet_link_tag 'application', relative: false
    - if content_for?(:head)
      = yield_content(:head)
    - if content_for?(:inline_css)
      - inline_css_file  = sitemap.resources.select { |p| p.source_file.match(/#{yield_content(:inline_css)}[.]css[.]scss$/) }.first
      - if inline_css_file
        %style{ type: 'text/css' }
          = inline_css_file.render

    %link{ rel: 'apple-touch-icon', sizes: '57x57', href: '/apple-touch-icon-57x57.png' }
    %link{ rel: 'apple-touch-icon', sizes: '114x114', href: '/apple-touch-icon-114x114.png' }
    %link{ rel: 'apple-touch-icon', sizes: '72x72', href: '/apple-touch-icon-72x72.png' }
    %link{ rel: 'apple-touch-icon', sizes: '144x144', href: '/apple-touch-icon-144x144.png' }
    %link{ rel: 'apple-touch-icon', sizes: '60x60', href: '/apple-touch-icon-60x60.png' }
    %link{ rel: 'apple-touch-icon', sizes: '120x120', href: '/apple-touch-icon-120x120.png' }
    %link{ rel: 'apple-touch-icon', sizes: '76x76', href: '/apple-touch-icon-76x76.png' }
    %link{ rel: 'apple-touch-icon', sizes: '152x152', href: '/apple-touch-icon-152x152.png' }
    %link{ rel: 'icon', type: 'image/png', href: '/favicon-196x196.png', sizes: '196x196' }
    %link{ rel: 'icon', type: 'image/png', href: '/favicon-160x160.png', sizes: '160x160' }
    %link{ rel: 'icon', type: 'image/png', href: '/favicon-96x96.png', sizes: '96x96' }
    %link{ rel: 'icon', type: 'image/png', href: '/favicon-16x16.png', sizes: '16x16' }
    %link{ rel: 'icon', type: 'image/png', href: '/favicon-32x32.png?v=2', sizes: '32x32' }
    %meta{ name: 'msapplication-TileColor', content: '#2b5797' }
    %meta{ name: 'msapplication-TileImage', content: '/mstile-144x144.png' }
    %link{ rel: 'alternate', type: 'application/atom+xml', title: 'Feed', href: '/feed.xml' }
    %link{ href: "https://www.franksmovielog.com#{current_page.url}", rel: 'canonical' }
  %body
    .content-container{ class: yield_content(:content_class) }
      %header.mast
        %h1.mast__title
          %a.mast__title-link{ href: '/', tabindex: 1 } Frank's Movie Log
        %button.mast__search-toggle{ data: { toggle: true }, accessKey: 'S', tabindex: 3 }
          Search
        = form_tag 'https://www.google.com/search', method: :get, class: 'mast__search-form js-toggle js-toggle_off' do
          = hidden_field_tag 'q', value: 'site:www.franksmovielog.com'
          .mast__search-wrap
            = text_field_tag('q', placeholder: 'Search the Movie Log',
                                  id: 'mastSearchInput',
                                  class: 'mast__search-input',
                                  tabindex: 2)
      = yield
      %footer.footer
        = yield_content(:footer) if content_for?(:footer)

        .footer-links
          %span.footer-link
            %a{ href: '/' } Viewing Log
          %span.footer-link
            %a{ href: '/' } About

      - unless development?
        %script{ async: true, src: '//www.google-analytics.com/analytics.js' }
        :javascript
          window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
          ga('create', 'UA-55282521-1', 'auto');
          var pl = window.location.pathname + window.location.search
          ga('send', 'pageview', { 'page': pl, 'title': document.title })
          window.addEventListener('error', function (err) {
            var lineAndColumnInfo = err.colno ? ' line:' + err.lineno +', column:'+ err.colno : ' line:' + err.lineno;
            ga('send',
              'event',
              'JavaScript Error',
              err.message,
              err.filename + lineAndColumnInfo + ' -> ' +  navigator.userAgent,
              0,
              true
            );
          });
      :javascript
        WebFontConfig = { google: { families: [ 'Khula:800:latin,latin-ext' ] } };
        (function() {
          var iOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;

          if (!iOS) {
            return;
          }

          var wf = document.createElement('script');
          wf.src = 'https://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js';
          wf.type = 'text/javascript';
          wf.async = 'true';
          var s = document.getElementsByTagName('script')[0];
          s.parentNode.insertBefore(wf, s);
        })();

      = javascript_include_tag('application.js', async: :async )

